# AI Automation Framework - Cursor Rules

This repository contains shared AI automation rules, skills, and workflows for OutSystems teams.

## Framework Structure

- **`.cursor/shared/skills/`** - Reusable task rules (PR creation, Jira updates, branch naming, design verification)
- **`.cursor/shared/agents/`** - Workflow definitions that combine multiple skills
- **`.cursor/shared/teams/`** - Team-specific overrides
- **`infrastructure/`** - MCP server configurations (automation repo only)
- **`projects/`** - Project-specific configurations (automation repo only)

## Using Skills and Agents

When the user requests automation tasks, use natural language and automatically identify which skills/agents to use from this framework.

**Natural Language Examples:**
- "Create a PR" → Use `.cursor/shared/skills/pr-creation.md` rules
- "Update the Jira story" → Use `.cursor/shared/skills/jira-updates.md` rules
- "Create a branch" → Use `.cursor/shared/skills/branch-naming.md` rules
- "Check if this matches Figma" → Use `.cursor/shared/skills/design-verification.md` rules
- "Test in ODC" or "Create test app" → Use `.cursor/shared/skills/odc-testing.md` rules
- "Complete this story" or "End-to-end Mobile UI change" or "Publish XIF" → Use `.cursor/shared/agents/mobile-ui-change.md` workflow

**Prefixes are optional** - The user may use `skill:` or `agent:` prefixes, but natural language is preferred and works just as well. The AI should infer which skill/agent to use from the request context.

## Configuration Hierarchy

When resolving which rules to use, follow this priority order:

1. `.cursor/` (in user's repo) - Repo-specific overrides (highest priority)
2. `.cursor/shared/teams/{team}/` - Team-specific overrides
3. `.cursor/shared/skills/`, `.cursor/shared/agents/` - Org-level defaults (lowest priority)

## Key Rules

### PR Creation
- **Always** use `skill:pr-creation` when creating pull requests
- **Must** follow format: `<jira-issue>: <subject>` (with colon)
- **Must** set at least one label
- **Must** fill Context and Impacts sections

### Jira Updates
- **Always** use `skill:jira-updates` when updating Jira stories
- **Must** update "What I Did" section with implementation details
- **Must** include verification steps

### Branch Naming
- **Always** use `skill:branch-naming` when creating branches
- **Must** follow format: `<issue-type>/<jira-issue-number>-<short-name>`
- **Must** branch from `main`

### Design Verification
- **Always** use `skill:design-verification` when verifying designs against Figma
- **Must** compare Figma values with codebase tokens
- **Must** flag any discrepancies

## Workflow Agents

### Mobile UI Change
- Use `agent:mobile-ui-change` for complete Mobile UI story workflows
- Combines: branch creation → implementation → documentation → WidgetLibrary consumption → XIF publishing → ODC testing → PR creation
- Automatically handles Jira updates, Release Notes, and PR creation
- Most comprehensive agent for Mobile UI work

### Design Verification
- Use `agent:design-verification` to verify component designs
- Fetches Figma specs and compares with codebase
- Provides comparison table of values

## MCP Servers

This framework uses the following MCP servers (configured in `~/.cursor/mcp.json`):
- **Jira** (Atlassian MCP) - For issue management
- **Figma** (Framelink MCP) - For design verification
- **GitHub** (via CLI) - For PR management
- **Browser** - For visual verification (can be flaky)

## Important Notes

- **Never commit credentials** - All credentials are in `.env` files (gitignored)
- **Always validate** - Check that PR titles, branch names, etc. follow conventions
- **Use natural language** - Infer which skill/agent to use from the user's request (no need for explicit prefixes)
- **Read skill/agent files** - When a task matches a skill or agent, read the corresponding file from `.cursor/shared/skills/` or `.cursor/shared/agents/` and follow its rules
- **Use project configs** - Check `projects/{project}/config.json` in the automation repo for project-specific settings (Figma file keys, Jira projects, etc.)

## Examples

**User**: "Create a PR for my changes"
**AI**: Read `.cursor/shared/skills/pr-creation.md` and follow those rules to create PR with proper title format, labels, and template sections.

**User**: "Update the Jira story with what I did"
**AI**: Read `.cursor/shared/skills/jira-updates.md` and follow those rules to update the "What I Did" section with implementation details and verification steps.

**User**: "Complete story ROU-12345" or "End-to-end Mobile UI change"
**AI**: Read `.cursor/shared/agents/mobile-ui-change.md` and follow that workflow to handle branch creation, implementation, WidgetLibrary consumption, XIF publishing, ODC testing, Jira updates, and PR creation.

**User**: "Check if my component matches Figma"
**AI**: Read `.cursor/shared/skills/design-verification.md` and follow those rules to fetch Figma specs, compare with codebase tokens, and flag any discrepancies.

**Note**: The AI should automatically identify which skill/agent to use from natural language. No need for explicit prefixes unless the user uses them.
